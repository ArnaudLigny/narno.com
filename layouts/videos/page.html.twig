{% extends '_default/page.html.twig' %}

{% block head %}
{{ parent() }}
    {%- for video in page.videos ~%}
    <link rel="preload" href="{{ asset('videos/' ~ video.filename) }}" as="video" type="video/mp4" />
    {%- endfor ~%}
{% endblock %}

{% block content %}
        <div class="post">
          <span><a href="/videos">Vid√©os</a></span>
          <h1 class="post-title">{{~ page.title ~}}</h1>
          <video id="player" playsinline controls autoplay data-poster="{{ asset('videos/' ~ page.poster) }}">
            {%- for video in page.videos ~%}
            <source src="{{ asset('videos/' ~ video.filename) }}" type="video/mp4" size="{{ video.size }}" />
            {%- endfor ~%}
          </video>
          {{ page.content }}
        </div>
        <script src="{{ asset('plyr/plyr.js') }}"></script>
        <script>
          const player = new Plyr('#player', {
            controls: [
              'play-large',
              'play',
              'progress',
              'current-time',
              'duration',
              'mute',
              'volume',
              'fullscreen',
            ]
          });
        </script>
        <link rel="stylesheet" href="{{ asset('plyr/plyr.css') }}" />
        <style>
          :root {
            --plyr-color-main: grey;
          }
        </style>
{% endblock %}